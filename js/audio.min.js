var tracks;var mainTracks;(function playListCall(){$.ajax({url:"playercollection.php",type:"POST",success:function(response){tracks=JSON.parse(response);console.log(tracks);mainTracks=tracks.filter(function(obj){return obj.type=="main"});console.log(mainTracks)}})})();function whenAvailable(name,callback){var interval=10;window.setTimeout(function(){if(window[name]){callback(window[name])}else{window.setTimeout(arguments.callee,interval)}},interval)}
$(document).ready(function(){whenAvailable("tracks",function(t){var music=document.getElementById('music');var duration=music.duration;var playButton=document.getElementById('playButton');var prevButton=document.getElementById('btnPrev');var nextButton=document.getElementById('btnNext');var playhead=document.getElementById('playhead');var timeline=document.getElementById('timelineFrame');var timelineFrame=document.getElementById('timeline');var volume=document.getElementById('mute');var supportsAudio=document.createElement('audio').canPlayType;var index=0,playing=!1,mediaPath='audio/',extension='';audio=$('#music').bind('play',function(){playing=!0}).bind('pause',function(){playing=!1}).get(0);extension=audio.canPlayType('audio/mpeg')?'.mp3':audio.canPlayType('audio/ogg')?'.ogg':'';playButton.addEventListener("click",play);prevButton.addEventListener("click",previous);nextButton.addEventListener("click",foward);function previous(){if((index-1)>-1){index--;loadTrack(index);$('.image').css("background-image","url(audioImg/"+mainTracks[index].imageCode+".jpg)");$(".coverImg").css("opacity","0.45");$("div:visible[id*='"+mainTracks[index].imageCode+"']").css("opacity","1");$('.coverImg').removeClass("imgSelected");$("div:visible[id*='"+mainTracks[index].imageCode+"']").addClass("imgSelected");if(playing){music.play()}}else{index=mainTracks.length-1;loadTrack(index);$('.image').css("background-image","url(audioImg/"+mainTracks[index].imageCode+".jpg)");$(".coverImg").css("opacity","0.45");$("div:visible[id*='"+mainTracks[index].imageCode+"']").css("opacity","1");$('.coverImg').removeClass("imgSelected");$("div:visible[id*='"+mainTracks[index].imageCode+"']").addClass("imgSelected");if(playing){music.play()}}
document.getElementById('musicLabel').innerHTML="";if(mainTracks[index].hasAlbum!="no"){document.getElementById('musicLabel').innerHTML=mainTracks[index].albumName+": "+mainTracks[index].name}else{document.getElementById('musicLabel').innerHTML=mainTracks[index].name}}
function play(){if(!supportsAudio){$(".errorMessage").show()}
if($('#btnPrev').is(':visible')){document.getElementById('musicLabel').innerHTML="";if(mainTracks[index].hasAlbum!="no"){document.getElementById('musicLabel').innerHTML=mainTracks[index].albumName+": "+mainTracks[index].name}
$(".coverImg").css("opacity","0.45");$("div:visible[id*='"+mainTracks[index].imageCode+"']").css("opacity","1");$('.coverImg').removeClass("imgSelected");$("div:visible[id*='"+mainTracks[index].imageCode+"']").addClass("imgSelected")}
if(music.paused){music.play();document.getElementById('playButton').innerHTML="";document.getElementById('playButton').innerHTML="II"}else{music.pause();document.getElementById('playButton').innerHTML="";document.getElementById('playButton').innerHTML="<i class=\"fas fa-caret-right\"></i>"}}
function foward(){if((index+1)<mainTracks.length){index++;loadMainTrack(index);$('.image').css("background-image","url(audioImg/"+mainTracks[index].imageCode+".jpg)");$(".coverImg").css("opacity","0.45");$("div:visible[id*='"+mainTracks[index].imageCode+"']").css("opacity","1");$('.coverImg').removeClass("imgSelected");$("div:visible[id*='"+mainTracks[index].imageCode+"']").addClass("imgSelected");if(playing){music.play()}}else{index=0;loadMainTrack(index);$('.image').css("background-image","url(audioImg/"+mainTracks[index].imageCode+".jpg)");$(".coverImg").css("opacity","0.45");$("div:visible[id*='"+mainTracks[index].imageCode+"']").css("opacity","1");$('.coverImg').removeClass("imgSelected");$("div:visible[id*='"+mainTracks[index].imageCode+"']").addClass("imgSelected");document.getElementById('playButton').innerHTML="";document.getElementById('playButton').innerHTML="II";if(playing){music.play()}}
document.getElementById('musicLabel').innerHTML="";if(mainTracks[index].hasAlbum!="no"){document.getElementById('musicLabel').innerHTML=mainTracks[index].albumName+": "+mainTracks[index].name}else{document.getElementById('musicLabel').innerHTML=mainTracks[index].name}}
music.addEventListener('ended',function(){var found=!1;for(var i=0;i<mainTracks.length;i++){if(mainTracks[i].name==tracks[index].name){found=!0;break}}
if((index+1)<mainTracks.length&&found==!0){index++;loadMainTrack(index);$('.image').css("background-image","url(audioImg/"+mainTracks[index].imageCode+".jpg)");$(".coverImg").css("opacity","0.45");$("div:visible[id*='"+mainTracks[index].imageCode+"']").css("opacity","1");$('.coverImg').removeClass("imgSelected");$("div:visible[id*='"+mainTracks[index].imageCode+"']").addClass("imgSelected");music.play()}else{music.pause();if(found==!0){index=0;$('.image').css("background-image","url(audioImg/"+mainTracks[index].imageCode+".jpg)");$(".coverImg").css("opacity","0.45");$("div:visible[id*='"+mainTracks[index].imageCode+"']").css("opacity","1");$('.coverImg').removeClass("imgSelected");$("div:visible[id*='"+mainTracks[index].imageCode+"']").addClass("imgSelected")}
loadMainTrack(index);document.getElementById('playButton').innerHTML=""
document.getElementById('playButton').innerHTML="<i class=\"fas fa-caret-right\"></i>"}
if(found==!0){document.getElementById('musicLabel').innerHTML="";if(mainTracks[index].hasAlbum!="no"){document.getElementById('musicLabel').innerHTML=mainTracks[index].albumName+": "+mainTracks[index].name}else{document.getElementById('musicLabel').innerHTML=mainTracks[index].name}}},!1);volume.addEventListener("click",function(event){if(document.getElementById('mute').innerHTML=="<i class=\"fa fa-volume-off\" aria-hidden=\"true\"></i>"){document.getElementById('music').muted=!1;document.getElementById('mute').innerHTML=""
document.getElementById('mute').innerHTML="<i class=\"fa fa-volume-up\" aria-hidden=\"true\"></i>"}else{document.getElementById('music').muted=!0;document.getElementById('mute').innerHTML=""
document.getElementById('mute').innerHTML="<i class=\"fa fa-volume-off\" aria-hidden=\"true\"></i>"}},!1);music.addEventListener("timeupdate",timeUpdate,!1);timeline.addEventListener("click",function(event){moveplayhead(event);music.currentTime=duration*clickPercent(event)},!1);function clickPercent(event){return(event.clientX-getPosition(timeline))/(timeline.offsetWidth-playhead.offsetWidth)}
playhead.addEventListener('mousedown',mouseDown,!1);window.addEventListener('mouseup',mouseUp,!1);var onplayhead=!1;function mouseDown(){onplayhead=!0;window.addEventListener('mousemove',moveplayhead,!0);music.removeEventListener('timeupdate',timeUpdate,!1)}
function mouseUp(event){if(onplayhead==!0){moveplayhead(event);window.removeEventListener('mousemove',moveplayhead,!0);music.currentTime=duration*clickPercent(event);music.addEventListener('timeupdate',timeUpdate,!1)}
onplayhead=!1}
function moveplayhead(event){var newMargLeft=event.clientX-getPosition(timeline);if(newMargLeft>=0&&newMargLeft<=(timeline.offsetWidth-playhead.offsetWidth)){playhead.style.marginLeft=newMargLeft+"px"}
if(newMargLeft<0){playhead.style.marginLeft="0px"}
if(newMargLeft>(timeline.offsetWidth-playhead.offsetWidth)){playhead.style.marginLeft=(timeline.offsetWidth-playhead.offsetWidth)+"px"}}
function timeUpdate(){var playPercent=(timeline.offsetWidth-playhead.offsetWidth)*(music.currentTime/duration);playhead.style.marginLeft=playPercent+"px";timelineFrame.style.width=playPercent+"px";if(music.currentTime==duration){}}
music.addEventListener("canplaythrough",function(){duration=music.duration},!1);function getPosition(el){return el.getBoundingClientRect().left}
function loadMainTrack(id){id=index;music.src=mediaPath+mainTracks[id].file+extension};function loadTrack(id){id=index;music.src=mediaPath+tracks[id].file+extension};loadMainTrack(index);$('.coverImg').click(function(){$('#btnPrev').fadeIn(500);$('#btnNext').fadeIn(500);$('.coverImg').css("opacity","0.45");$('.coverImg p').hide();$('.coverImg').removeClass("imgSelected");$(this).addClass("imgSelected");$(this).css("opacity","1");var url=$(this).css('background-image');url=url.replace('url(','').replace(')','').replace(/\"/gi,"");$('.image').css("background-image","url("+url+")");for(var i in mainTracks){var value=mainTracks[i].imageCode;if(this.id==value){index=parseInt(i);break}}
document.getElementById('musicLabel').innerHTML="";if(mainTracks[index].hasAlbum!="no"){document.getElementById('musicLabel').innerHTML=mainTracks[index].albumName+": "+mainTracks[index].name}else{document.getElementById('musicLabel').innerHTML=mainTracks[index].name}
loadMainTrack(index);music.play();document.getElementById('playButton').innerHTML="";document.getElementById('playButton').innerHTML="II"});window.onkeydown=function(e){if(e.keyCode===32&&$(".play-music-section").is(":visible")){e.preventDefault();if(music.paused){music.play();document.getElementById('playButton').innerHTML="";document.getElementById('playButton').innerHTML="II"}else{music.pause();document.getElementById('playButton').innerHTML="";document.getElementById('playButton').innerHTML="<i class=\"fas fa-caret-right\"></i>"}}
if(e.keyCode===37&&$(".play-music-section").is(":visible")){previous();$('#btnPrev').show();$('#btnNext').show()}
if(e.keyCode===39&&$(".play-music-section").is(":visible")){foward();$('#btnPrev').show();$('#btnNext').show()}}
$(".project-know-more span").click(function(){var songName=$(this).attr("id");playSoundtrack(songName);$(".fa-play").hide();$(".right-bar .fa-times").fadeIn(500);width<740?$(".right-bar .mobile-album-btn").fadeIn(500):null;width<740?$('.main-content').hide():null});$("#myBtn").click(function(){music.pause();document.getElementById('playButton').innerHTML="";document.getElementById('playButton').innerHTML="<i class=\"fas fa-caret-right\"></i>"});function playSoundtrack(name){for(var i in tracks){var value=tracks[i].file;if(name==value){index=parseInt(i);break}}
document.getElementById('musicLabel').innerHTML="";if(tracks[index].hasAlbum!="no"){for(var i in mainTracks){var value=mainTracks[i].file;if(name==value){index=parseInt(i);break}}
document.getElementById('musicLabel').innerHTML=mainTracks[index].albumName+": "+mainTracks[index].name;$('.image').css("background-image","url(audioImg/"+mainTracks[index].imageCode+".jpg)");$('#btnPrev').show();$('#btnNext').show();loadMainTrack(index);play()}else{document.getElementById('musicLabel').innerHTML=tracks[index].name;$('.image').css("background-image","url(audioImg/"+tracks[index].imageCode+".jpg)");$('#btnPrev').hide();$('#btnNext').hide();$(".coverImg").css("opacity","0.45");$('.coverImg').removeClass("imgSelected");loadTrack(index);play()}
if(!$(".play-music-section").is(":visible")){$(".play-music-section").fadeIn(500);$(".album-selection").slideDown(500);$(".close").animate({top:"76px"},1000)}}})})